<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <style>
        :root {
            --panelMaxW: 1280px;
        }

        /* íŠ¸ë¦¬ê±°(í•€) ì»¨í…Œì´ë„ˆ */
        #pinShowcase {
            width: 100%;
            height: 100vh;
            position: relative;
            overflow: hidden;
            color: #fff;
            display: grid;
            place-items: center;
            /* í•­ìƒ ì¤‘ì•™ */
        }

        /* ì¤‘ì•™ ì •ë ¬ìš© ì‰˜ (ìŠ¤í¬ë¡¤ë°”/ë·°í¬íŠ¸ ë³€í™”ì—ë„ ê· í˜• ìœ ì§€) */
        .pinShell {
            position: relative;
            width: 100%;
            height: 100%;
            display: grid;
            place-items: center;
            overflow: hidden;
        }

        /* ì‹¤ì œ ì‹œê°ì  í”„ë ˆì„(ì—¬ê¸°ë¥¼ í‚¤ì› ë‹¤/ì¤„ì˜€ë‹¤ í•¨) */
        .pinFrame {
            position: relative;
            margin: 0 auto;
            /* âœ… ë°ìŠ¤í¬í†±: 16:9, ì¢Œìš° ì•ˆë°€ë¦¬ë„ë¡ width/height ê³„ì‚° */
            aspect-ratio: 16 / 9;
            width: min(100vw, calc(100vh * 16 / 9));
            height: auto;
            border-radius: 0;
            overflow: hidden;
            will-change: width, height, border-radius, transform;
            background: #000;
            /* ê°€ì¥ìë¦¬ ëŒ€ë¹„ */
        }

        /* âœ… ëª¨ë°”ì¼/íƒœë¸”ë¦¿: ì„¸ë¡œ ê½‰ ì±„ì›€, 9:16 ë¹„ìœ¨ */
        @media (max-width: 1024px) {
            .pinFrame {
                height: 100vh;
                width: auto;
                /* ë†’ì´ì— ë§ì¶° í­ ìë™ */
                aspect-ratio: 9 / 16;
                border-radius: 0;
            }
        }

        /* ì•„ì›ƒíŠ¸ë¡œ ìˆœê°„: ì •ì‚¬ê°í˜•ìœ¼ë¡œ ì „í™˜ (heightëŠ” widthì— ì¢…ì†) */
        .pinFrame.is-square {
            aspect-ratio: 1 / 1;
            height: auto;
            /* widthë¡œë¶€í„° ìë™ ê³„ì‚° */
        }

        .stage {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .panel {
            position: absolute;
            inset: 0;
            display: grid;
            place-items: center;
            opacity: 0;
            transform: translateY(40px);
            will-change: transform, opacity;
        }

        .p1 {
            z-index: 1;
        }

        .p2 {
            z-index: 2;
        }

        .p3 {
            z-index: 3;
        }

        .p4 {
            z-index: 4;
        }

        .p2 {
            background: linear-gradient(180deg, #2e50e2, #1428A0);
        }

        .p3 {
            background: linear-gradient(180deg, #0f0f0f, #000);
        }

        .p4 {
            background: linear-gradient(180deg, #333, #111);
        }

        /* p1 hero */
        .p1 {
            position: relative;
        }

        .p1 .centerOverlay {
            position: absolute;
            inset: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none;
            z-index: 2;
        }

        .p1 .centerOverlay .inner {
            pointer-events: auto;
        }

        /* ğŸ” í”„ë ˆì„ ë‚´ë¶€ í¼ì„¼íŠ¸ë¡œ ì œì–´ â†’ ë°˜ì‘í˜• ì•ˆì „ */
        .p1 .heroBox {
            width: 80%;
            height: 80%;
            background: url(https://ncryk7.mycafe24.com/package2.png) center/cover no-repeat;
            border-radius: 24px;
            display: grid;
            place-items: center;
            will-change: width, height, border-radius;
            z-index: 1;
        }

        .inner {
            position: absolute;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 0 24px;
            max-width: 960px;
        }

        .title {
            font-size: 56px;
            line-height: 1.15;
            font-weight: 800;
            letter-spacing: -0.5px;
            margin-bottom: 16px;
        }

        .desc {
            font-size: 18px;
            line-height: 1.6;
            opacity: 0.9;
        }

        /* p2 ê·¸ë¦¬ë“œ */
        .panel_box_wrapper {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            width: min(var(--panelMaxW), 92%);
        }

        .panel_box {
            width: 380px;
            border-radius: 32px;
            transform: translateZ(0);
        }

        .panel_box>img {
            width: 380px;
            border-radius: 32px;
            display: block;
        }

        /* p3 í™•ì¥ ìš”ì†Œ */
        .p3 .featureImgWrap {
            width: min(70%, 1100px);
            max-width: var(--panelMaxW);
            margin-top: 24px;
            transform: translateY(60px);
            opacity: 0;
        }

        .p3 .featureImgWrap img {
            width: 100%;
            display: block;
            border-radius: 24px;
        }

        .p3 .msg2 {
            margin-top: 24px;
            opacity: 0;
            transform: translateY(30px);
        }

        @media (max-width: 1024px) {
            .title {
                font-size: 40px;
            }

            .p1 .heroBox {
                border-radius: 0;
            }

            /* ëª¨ë°”ì¼ í’€ìŠ¤í¬ë¦° ê°ì„± ìœ ì§€ */
            .panel_box,
            .panel_box>img {
                width: 44vw;
            }
        }

        @media (max-width: 768px) {
            .title {
                font-size: 32px;
            }

            .desc {
                font-size: 16px;
            }
        }
    </style>
</head>

<body>

    <section id="pinShowcase">
        <div class="pinShell">
            <div class="pinFrame"><!-- âœ… ì´ í”„ë ˆì„ì´ ë¹„ìœ¨/í¬ê¸° ë‹´ë‹¹ -->
                <div class="stage">
                    <!-- p1 -->
                    <div class="panel p1">
                        <div class="heroBox" aria-hidden="true"></div>
                        <div class="centerOverlay">
                            <div class="inner">
                                <p class="title">Step 1 â€” ì¸íŠ¸ë¡œ</p>
                            </div>
                        </div>
                    </div>

                    <!-- p2 -->
                    <div class="panel p2">
                        <div class="inner">
                            <p class="title">ë””ìì¸í…Œì´ë‹ì˜ ëª¨ë“  ì‘ì—…ì€</p>
                            <p class="title">ë°˜ì‘í˜•ìœ¼ë¡œ ì œì‘ë©ë‹ˆë‹¤.</p>
                        </div>
                        <div class="panel_box_wrapper">
                            <div class="panel_box"><img src="https://ncryk7.mycafe24.com/package1.png" alt=""></div>
                            <div class="panel_box"><img src="https://ncryk7.mycafe24.com/package1.png" alt=""></div>
                            <div class="panel_box"><img src="https://ncryk7.mycafe24.com/package1.png" alt=""></div>
                            <div class="panel_box"><img src="https://ncryk7.mycafe24.com/package1.png" alt=""></div>
                            <div class="panel_box"><img src="https://ncryk7.mycafe24.com/package1.png" alt=""></div>
                            <div class="panel_box"><img src="https://ncryk7.mycafe24.com/package1.png" alt=""></div>
                            <div class="panel_box"><img src="https://ncryk7.mycafe24.com/package1.png" alt=""></div>
                            <div class="panel_box"><img src="https://ncryk7.mycafe24.com/package1.png" alt=""></div>
                        </div>
                    </div>

                    <!-- p3 -->
                    <div class="panel p3">
                        <div class="inner">
                            <p class="title">Step 3 â€” ë¹„ì£¼ì–¼/ëª¨ì…˜</p>
                            <p class="desc">ì´ë¯¸ì§€/ì˜ìƒ/3D ë“± ì–´ë–¤ ì½˜í…ì¸ ë“  ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ êµì²´ ê°€ëŠ¥.</p>
                            <div class="featureImgWrap">
                                <img src="https://ncryk7.mycafe24.com/package3.png" alt="feature">
                            </div>
                            <p class="title msg2">ë©”ì‹œì§€ 2 â€” ì‹¤ì œ ì œì‘ ì˜ˆì‹œë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”.</p>
                        </div>
                    </div>

                    <!-- p4 (ì‚¬ì§„ ì—†ìŒ) -->
                    <div class="panel p4">
                        <div class="inner">
                            <p class="title">Step 4 â€” CTA</p>
                            <p class="desc">ë§ˆì§€ë§‰ì—ì„œ ë²„íŠ¼/ë§í¬ë¡œ ë‹¤ìŒ ì„¹ì…˜ìœ¼ë¡œ ìœ ë„í•˜ì„¸ìš”.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        const root = document.querySelector("#pinShowcase");
        const frame = root.querySelector(".pinFrame");
        const p1 = root.querySelector(".p1");
        const p2 = root.querySelector(".p2");
        const p3 = root.querySelector(".p3");
        const p4 = root.querySelector(".p4");
        const panels = [p1, p2, p3, p4];

        const heroBox = root.querySelector(".p1 .heroBox");
        const p2Boxes = gsap.utils.toArray(".p2 .panel_box");
        const firstHalf = p2Boxes.slice(0, 4);
        const secondHalf = p2Boxes.slice(4, 8);

        const featureImgWrap = p3.querySelector(".featureImgWrap");
        const msg2 = p3.querySelector(".msg2");

        /* ìŠ¤í¬ë¡¤ ê¸¸ì´ */
        const SCROLL_PER_PANEL = 1100;
        const totalScroll = (panels.length - 1) * SCROLL_PER_PANEL;

        /* ì´ˆê¸° ìƒíƒœ */
        gsap.set(p1, { opacity: 1, y: 0 });
        gsap.set([p2, p3, p4], { opacity: 0, y: 40 });
        gsap.set(p3, { xPercent: 100 });
        gsap.set(p2, { xPercent: 0 });
        gsap.set(p2Boxes, { y: 40, opacity: 0 });
        gsap.set(featureImgWrap, { opacity: 0, y: 60 });
        gsap.set(msg2, { opacity: 0, y: 30 });

        /* ë©”ì¸ íƒ€ì„ë¼ì¸ */
        const tl = gsap.timeline({
            scrollTrigger: {
                trigger: root,
                start: "top top",
                end: "+=" + totalScroll,
                pin: true,
                scrub: 1,
                anticipatePin: 1,
                snap: {
                    snapTo: (v) => {
                        const steps = panels.length - 1;
                        return Math.round(v * steps) / steps;
                    },
                    duration: 0.15,
                    ease: "power1.out"
                }
            }
        });

        /* 1) p1: heroBox 80% â†’ 100% (í”„ë ˆì„ ê¸°ì¤€) */
        if (heroBox) {
            tl.to(heroBox, {
                width: "100%",
                height: "100%",
                borderRadius: 0,
                ease: "power2.out",
                duration: 0.6
            }, 0);
        }

        /* 2) p1 â†’ p2 */
        tl.to(p1, { opacity: 0, y: -40, duration: 0.5, ease: "power2.out" }, ">")
            .fromTo(p2, { opacity: 0, y: 40 }, { opacity: 1, y: 0, duration: 0.6, ease: "power2.out" }, "<");

        /* 3) p2 ë°•ìŠ¤ 8ê°œ ìŠ¤íƒœê±° ì¸ */
        tl.fromTo(p2Boxes,
            { y: 40, opacity: 0 },
            { y: 0, opacity: 1, duration: 0.6, ease: "power3.out", stagger: 0.08 },
            "<+=0.1"
        );

        /* 4) p2 â†’ p3 (í‘¸ì‹œ) */
        tl.add("p2to3", ">+=0.25")
            .to(firstHalf, { y: -160, duration: 0.5, ease: "power3.in" }, "p2to3")
            .to(secondHalf, { y: 160, duration: 0.5, ease: "power3.in" }, "p2to3")
            .to(p2, { xPercent: -100, duration: 0.65, ease: "power2.inOut" }, "p2to3")
            .fromTo(p3, { xPercent: 100, opacity: 1, y: 0 }, { xPercent: 0, opacity: 1, y: 0, duration: 0.65, ease: "power2.inOut" }, "p2to3")
            .set(p2, { opacity: 0 }, ">");

        /* 5) p3 ë‚´ë¶€: ì´ë¯¸ì§€(70%) â†’ í›„ì† ë©”ì‹œì§€ */
        tl.to(featureImgWrap, {
            opacity: 1, y: 0, duration: 0.8, ease: "power3.out"
        }, ">+=0.1"
        ).to(msg2, {
            opacity: 1, y: 0, duration: 0.6, ease: "power3.out"
        }, ">+=0.15"
        );

        /* 6) p3 â†’ p4 */
        tl.to(p3, { opacity: 0, y: -40, duration: 0.5, ease: "power2.out" }, ">+=0.2")
            .fromTo(p4, { opacity: 0, y: 40 }, { opacity: 1, y: 0, duration: 0.6, ease: "power2.out" }, "<");

        /* 7) âœ… ì•„ì›ƒíŠ¸ë¡œ
              - ë¨¼ì € ì •ì‚¬ê°í˜• ë¹„ìœ¨ í´ë˜ìŠ¤ ë¶€ì—¬(ì¦‰ì‹œ ì „í™˜)
              - ì´í›„ width 80vwë¡œ ì¶•ì†Œ (heightëŠ” aspect-ratioë¡œ 80vw ìë™)
              - border-radius 32px
        */
        tl.add("outro", ">+=0.3")
            .set(frame, { className: "+=is-square" }, "outro")
            .to(frame, {
                width: "80vw",
                borderRadius: "32px",
                duration: 0.9,
                ease: "power2.inOut",
                transformOrigin: "center center"
            }, "outro");

        /* íŒ:
         * - ë§Œì•½ ëª¨ë°”ì¼ì—ì„œ ì•„ì›ƒíŠ¸ë¡œ ë•Œ ê°€ë¡œê°€ ë„ˆë¬´ ì¢ê²Œ ëŠê»´ì§€ë©´,
         *   80vw ëŒ€ì‹  clamp(72vw, 80vw, 88vw) ê°™ì€ ê°’ìœ¼ë¡œ íŠœë‹í•´ë„ OK.
         */
    </script>

</body>

</html>