<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <style>
        /* 고유 스코프: 원하는 ID로 바꿔도 됨 */
        #pinShowcase {
            width: 100%;
            height: 100vh;
            /* 한 화면 고정 */
            position: relative;
            overflow: hidden;
            /* 패널들 바깥 가림 */
            background: #111;
            /* 배경 임시 */
            color: #fff;
        }

        #pinShowcase .stage {
            position: relative;
            width: 100%;
            height: 100%;
        }

        /* 한 화면 안에서 교체될 패널들 */
        #pinShowcase .panel {
            position: absolute;
            inset: 0;
            /* top/right/bottom/left:0 */
            display: grid;
            place-items: center;
            opacity: 0;
            /* 기본은 숨김 */
            transform: translateY(40px);
            /* 등장 시 살짝 위로 */
            will-change: transform, opacity;
        }

        /* 데모용 색상(원하면 지워도 됨) */
        #pinShowcase .panel.p1 {
            background: linear-gradient(180deg, #1f1f1f, #111);
        }

        #pinShowcase .panel.p2 {
            background: linear-gradient(180deg, #2e50e2, #1428A0);
        }

        #pinShowcase .panel.p3 {
            background: linear-gradient(180deg, #0f0f0f, #000);
        }

        #pinShowcase .panel.p4 {
            background: linear-gradient(180deg, #333, #111);
        }

        #pinShowcase .panel .inner {
            text-align: center;
            max-width: 960px;
            padding: 0 24px;
        }

        #pinShowcase .title {
            font-size: 56px;
            line-height: 1.15;
            font-weight: 800;
            letter-spacing: -0.5px;
            margin-bottom: 16px;
        }

        #pinShowcase .desc {
            font-size: 18px;
            line-height: 1.6;
            opacity: .9;
        }

        /* 스크롤 진행도 표시(선택) */
        #pinShowcase .progress {
            position: absolute;
            left: 24px;
            right: 24px;
            bottom: 24px;
            height: 4px;
            background: rgba(255, 255, 255, .15);
            overflow: hidden;
            border-radius: 999px;
        }

        #pinShowcase .progress .bar {
            width: 0%;
            height: 100%;
            background: #fff;
            transform-origin: left center;
        }

        /* 모바일 타이포 약간 축소 */
        @media (max-width: 768px) {
            #pinShowcase .title {
                font-size: 36px;
            }

            #pinShowcase .desc {
                font-size: 16px;
            }
        }
    </style>

</head>

<body>


    <section id="pinShowcase">
        <div class="stage">
            <div class="panel p1">
                <div class="inner">
                    <p class="title">Step 1 — 인트로</p>
                    <p class="desc">한 화면을 핀 고정한 상태에서 스크롤 진행에 따라 다음 섹션이 자연스럽게 교체됩니다.</p>
                </div>
            </div>

            <div class="panel p2">
                <div class="inner">
                    <p class="title">Step 2 — 메시지 강조</p>
                    <p class="desc">각 패널은 페이드/슬라이드로 등장하고 이전 패널은 부드럽게 사라집니다.</p>
                </div>
            </div>

            <div class="panel p3">
                <div class="inner">
                    <p class="title">Step 3 — 비주얼/모션</p>
                    <p class="desc">이미지, 영상, 3D 캔버스 등 원하는 콘텐츠를 배치해도 동일한 방식으로 교체됩니다.</p>
                </div>
            </div>

            <div class="panel p4">
                <div class="inner">
                    <p class="title">Step 4 — CTA</p>
                    <p class="desc">마지막 단계에서 버튼/링크로 다음 섹션이나 페이지로 자연스럽게 유도하세요.</p>
                </div>
            </div>

            <div class="progress" aria-hidden="true">
                <div class="bar"></div>
            </div>
        </div>
    </section>

    <script>
        // GSAP 플러그인 등록
        gsap.registerPlugin(ScrollTrigger);

        const root = document.querySelector("#pinShowcase");
        const panels = gsap.utils.toArray("#pinShowcase .panel");
        const progressBar = root.querySelector(".progress .bar");

        // 패널 수에 따라 전체 스크롤 길이 결정(한 패널당 1000px 느낌)
        const SCROLL_PER_PANEL = 900; // 취향대로 700~1200 사이 조절
        const totalScroll = (panels.length - 1) * SCROLL_PER_PANEL;

        // 처음 패널은 보이도록 세팅
        gsap.set(panels[0], { opacity: 1, y: 0 });

        // 타임라인: 각 패널을 순차적으로 IN/OUT
        const tl = gsap.timeline({
            scrollTrigger: {
                trigger: root,
                start: "top top",
                end: "+=" + totalScroll,
                pin: true,
                scrub: 1,              // 스크롤과 동기화
                anticipatePin: 1,
                // 스텝 단위로 스냅(패널 개수에 맞춰 딱딱 멈춤)
                snap: {
                    snapTo: (value) => {
                        const steps = panels.length - 1;
                        return Math.round(value * steps) / steps;
                    },
                    duration: 0.2,
                    ease: "power1.out"
                },
                onUpdate: (self) => {
                    // 진행도 바(선택)
                    if (progressBar) {
                        progressBar.style.width = (self.progress * 100).toFixed(2) + "%";
                    }
                }
            }
        });

        // 각 패널에 대해: 이전 패널 OUT, 현재 패널 IN
        panels.forEach((panel, i) => {
            if (i === 0) return;

            // 직전 패널 OUT
            tl.to(panels[i - 1], { opacity: 0, y: -40, duration: 0.5, ease: "power2.out" }, ">");

            // 현재 패널 IN
            tl.fromTo(panel,
                { opacity: 0, y: 40 },
                { opacity: 1, y: 0, duration: 0.6, ease: "power2.out" },
                "<" // 동시에 시작
            );
        });
    </script>

</body>

</html>