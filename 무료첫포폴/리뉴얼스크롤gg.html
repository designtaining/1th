<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>

    <style>
        .downdown_container {
            width: 100%;
            height: 100%;
        }

        .downdown_wrapper {
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .downdown_img {
            width: 100%;
            height: 100%;
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1;
            perspective: 1000px;
        }

        .downdown_img>img {
            width: 600px;
            height: 600px;
            animation: floatshake 3s ease-in-out infinite;
            transform-style: preserve-3d;
        }

        .downdown_title {
            position: absolute;
            font-family: 'Pretendard';
            font-size: 140px;
            font-weight: 700;
            color: #111111;
            z-index: 2;
        }

        @keyframes floatshake {
            0% {
                transform: translateY(0) rotateX(0deg) rotateY(0deg) rotateZ(0deg);
            }

            25% {
                transform: translateY(-20px) rotateX(4deg) rotateY(4deg) rotateZ(2deg);
            }

            50% {
                transform: translateY(-16px) rotateX(-4deg) rotateY(-4deg) rotateZ(-2deg);
            }

            75% {
                transform: translateY(-18px) rotateX(2deg) rotateY(2deg) rotateZ(1deg);
            }

            100% {
                transform: translateY(0) rotateX(0deg) rotateY(0deg) rotateZ(0deg);
            }
        }

        @keyframes floatshake2 {
            0% {
                transform: translateY(0);
            }

            25% {
                transform: translateY(-20px);
            }

            50% {
                transform: translateY(-16px);
            }

            75% {
                transform: translateY(-18px);
            }

            100% {
                transform: translateY(0);
            }
        }

        .downdown_box {
            width: 100%;
            height: 100%;
            display: flex;
            position: absolute;
            z-index: 1;
        }

        .downdown_photobox {
            width: 50%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .downdown_photobox>img {
            width: 600px;
            height: 600px;
            animation: floatshake2 3s ease-in-out infinite;
        }

        .downdown_desc_box {
            width: 50%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 0 120px;
        }

        .downdown_desc_wrap {
            display: flex;
            flex-direction: column;
            gap: 32px;
        }

        .downdown_desc_engtitle {
            font-family: 'Pretendard';
            font-size: 80px;
            font-weight: 700;
            color: #111111;
            line-height: 1.4;
            margin: 0;
        }

        .downdown_subtitle {
            font-family: 'Pretendard';
            font-size: 48px;
            font-weight: 700;
            color: #111111;
            line-height: 1.4;
            margin: 0;
        }

        .downdown_subtitle2 {
            font-family: 'Pretendard';
            font-size: 48px;
            font-weight: 700;
            color: #111111;
            line-height: 1.4;
            margin: 0;
        }

        .downdown_desc {
            font-family: 'Pretendard';
            font-size: 24px;
            font-weight: 400;
            color: #767676;
            line-height: 1.4;
            margin: 0;
        }

        .downdown_photobox2 {
            width: 50%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .downdown_photobox2>img {
            width: 600px;
            height: 600px;
            animation: floatshake2 3s ease-in-out infinite;
        }

        .downdown_span1 {
            text-decoration: underline 2px;
        }

        .downdown_span2 {
            color: #4768C9;
        }

        /* 위에꺼끝!! */

        .downdown_catchphrase_bg {
            position: absolute;
            z-index: 1;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            gap: 40px;
        }

        .downdown_bg_title1,
        .downdown_bg_title2 {
            font-family: 'Pretendard';
            font-size: 320px;
            font-weight: 900;
            color: rgba(17, 17, 17, 0.05);
            white-space: nowrap;
            margin: 0;
            line-height: 1.4;
            display: flex;
        }

        .downdown_bg_title1 span,
        .downdown_bg_title2 span {
            padding-right: 200px;
        }

        .downdown_bg_title1 {
            animation: slideLeft 100s linear infinite;
        }

        .downdown_bg_title2 {
            animation: slideRight 100s linear infinite;
        }

        @keyframes slideLeft {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        @keyframes slideRight {
            0% {
                transform: translateX(-50%);
            }

            100% {
                transform: translateX(0);
            }
        }

        .downdown_catchphrase_box {
            position: absolute;
            z-index: 2;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 160px;
        }

        .downdown_catchphrase {
            font-family: 'Pretendard';
            font-size: 80px;
            font-weight: 700;
            color: #111111;
            margin: 0;
        }

        .downdown_cp_bottom {
            display: flex;
            align-items: center;
            gap: 120px;
        }

        .downdown_cp_value {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .downdown_value1 {
            font-family: 'Pretendard';
            font-size: 24px;
            font-weight: 400;
            color: #111111;
            margin: 0;
            text-align: center;
        }

        .downdown_value2 {
            font-family: 'Pretendard';
            font-size: 80px;
            font-weight: 700;
            color: #111111;
            margin: 0;
            text-align: center;
            letter-spacing: -4px;
        }
    </style>
</head>

<body>

    <section class="downdown_container">

        <div class="downdown_wrapper">
            <div class="downdown_img">
                <img src="https://ncryk7.mycafe24.com/heart1.png" alt="">
            </div>
            <p class="downdown_title">
                WELCOME
            </p>
        </div>

        <div class="downdown_wrapper">
            <div class="downdown_box">
                <div class="downdown_photobox">
                    <img src="https://ncryk7.mycafe24.com/graphup.png" alt="">
                </div>
                <div class="downdown_desc_box">
                    <div class="downdown_desc_wrap">
                        <p class="downdown_desc_engtitle">
                            Operational Plan+
                        </p>
                        <p class="downdown_subtitle">
                            디테일한 전략을 설립하고,
                            <br>
                            <span class="downdown_span1">브랜드가치를 확장</span>하며,
                            <br>
                            <span class="downdown_span2">지속적인 성장</span>을 함께합니다.
                        </p>
                        <p class="downdown_desc">
                            고객사의 비즈니스를 깊이 이해하는 것을 시작으로,
                            <br>
                            업종마다 벤치마킹을 통해 경쟁사의 상황을 파악합니다.
                            <br>
                            목표와 비전을 확실히 하여 아이덴티티를 확립합니다.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="downdown_wrapper">
            <div class="downdown_box">
                <div class="downdown_desc_box">
                    <div class="downdown_desc_wrap">
                        <p class="downdown_desc_engtitle">
                            Beyond Worth+
                        </p>
                        <p class="downdown_subtitle2">
                            복잡한 발전의식을 추구하며,
                            <br>
                            <span class="downdown_span1">니즈를 파악</span>하는데 힘쏟고,
                            <br>
                            <span class="downdown_span2">가격대 최고퀄리티</span>를 보여드립니다.
                        </p>
                        <p class="downdown_desc">
                            아임웹에서 국한되었던 기능을 확장함으로써,
                            <br>
                            제공되는 DB와 코딩을 완벽히 구분하여 병행하고,
                            <br>
                            매력적인 임팩트와 효율성을 하나도 포기하지 않습니다.
                        </p>
                    </div>
                </div>
                <div class="downdown_photobox2">
                    <img src="https://ncryk7.mycafe24.com/structure.png" alt="">
                </div>
            </div>
        </div>

        <div class="downdown_wrapper">
            <div class="downdown_box">
                <div class="downdown_photobox">
                    <img src="https://ncryk7.mycafe24.com/web1.png" alt="">
                </div>
                <div class="downdown_desc_box">
                    <div class="downdown_desc_wrap">
                        <p class="downdown_desc_engtitle">
                            Easy Access+
                        </p>
                        <p class="downdown_subtitle2">
                            당사가 제공한 링크를 통하여
                            <br>
                            <span class="downdown_span1">작업진행률을 실시간</span>으로
                            <br>
                            <span class="downdown_span2">휴대기기에서 체크</span>할 수 있습니다.
                        </p>
                        <p class="downdown_desc">
                            제작 진행에 궁금한점을 직접 눈으로 확인하고,
                            <br>
                            의뢰측이 원하는 피드백이 더 쉽게 떠오르도록,
                            <br>
                            모든 디바이스 반응형으로 작업이 진행됩니다.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="downdown_wrapper">
            <div class="downdown_catchphrase_bg">
                <p class="downdown_bg_title1">
                    <span>DESIGN YOUR ENTERTAINING</span>
                    <span>DESIGN YOUR ENTERTAINING</span>
                    <span>DESIGN YOUR ENTERTAINING</span>
                    <span>DESIGN YOUR ENTERTAINING</span>
                </p>
                <p class="downdown_bg_title2">
                    <span>SMART & EASY GROWTH FINE</span>
                    <span>SMART & EASY GROWTH FINE</span>
                    <span>SMART & EASY GROWTH FINE</span>
                    <span>SMART & EASY GROWTH FINE</span>
                </p>
            </div>
            <div class="downdown_catchphrase_box">
                <div class="downdown_cp_top">
                    <p class="downdown_catchphrase">
                        Make it Your own
                    </p>
                </div>
                <div class="downdown_cp_bottom">
                    <div class="downdown_cp_value">
                        <p class="downdown_value1">
                            프로젝트
                        </p>
                        <p class="downdown_value2">
                            40+
                        </p>
                    </div>
                    <div class="downdown_cp_value">
                        <p class="downdown_value1">
                            고객만족도
                        </p>
                        <p class="downdown_value2">
                            100%
                        </p>
                    </div>
                    <div class="downdown_cp_value">
                        <p class="downdown_value1">
                            납기율 준수
                        </p>
                        <p class="downdown_value2">
                            100%
                        </p>
                    </div>
                    <div class="downdown_cp_value">
                        <p class="downdown_value1">
                            런칭
                        </p>
                        <p class="downdown_value2">
                            2025
                        </p>
                    </div>
                </div>
            </div>
        </div>

    </section>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        /* ===== 설정 ===== */
        const CFG = {
            distance: 48,        // 슬라이드업 오프셋(px)
            scrollLen: "140%",   // 섹션 핀 길이(120~180% 권장)
            scrub: 0.5,          // 스크럽 감도
            ease: "power2.out"   // 떠오를 때 이징
        };

        // ⬇️ 여기만 바꾸면 전부 통일됨: 'auto' | 'scrub' | 'mixed'
        const COUNTER = {
            mode: "auto",
            autoDuration: 2.2,   // auto일 때 카운트업 시간
            scrubSegment: 0.35,  // scrub일 때 타임라인 구간 길이
            ease: "power2.out"
        };

        const prefersReduced = window.matchMedia("(prefers-reduced-motion: reduce)").matches;

        /* ===== 유틸 ===== */
        const setUp = (el) => el && gsap.set(el, { y: CFG.distance, autoAlpha: 0 });
        const parseNum = (txt) => {
            const m = (txt || "").trim().match(/^(\d+(?:[\.,]\d+)?)(.*)$/);
            if (!m) return null;
            return { target: parseFloat(m[1].replace(",", "")), suffix: m[2] || "" };
        };

        /* ===== 섹션별 스크럽 타임라인 ===== */
        function buildSectionTimeline(sec) {
            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: sec,
                    start: "top top",
                    end: "+=" + CFG.scrollLen,
                    pin: true,
                    scrub: CFG.scrub,
                    anticipatePin: 1,
                    invalidateOnRefresh: true,
                    // markers: true,
                },
                defaults: { ease: "none" }
            });

            // 요소 수집
            const title = sec.querySelector(".downdown_title");
            const eng = sec.querySelector(".downdown_desc_engtitle");
            const sub1 = sec.querySelector(".downdown_subtitle");
            const sub2 = sec.querySelector(".downdown_subtitle2");
            const desc = sec.querySelector(".downdown_desc");

            const img1C = sec.querySelector(".downdown_photobox, .downdown_img");
            const img2C = sec.querySelector(".downdown_photobox2");

            const catchphrase = sec.querySelector(".downdown_catchphrase");
            const metricsBox = sec.querySelector(".downdown_cp_bottom");
            const bg1 = sec.querySelector(".downdown_bg_title1");
            const bg2 = sec.querySelector(".downdown_bg_title2");

            const counters = sec.querySelectorAll(".downdown_value2");

            // 모션 최소화 모드
            if (prefersReduced) {
                [title, eng, sub1, sub2, desc, img1C, img2C, catchphrase, metricsBox].forEach(el => el && gsap.set(el, { y: 0, autoAlpha: 1 }));
                [bg1, bg2].forEach(el => el && gsap.set(el, { autoAlpha: 1 }));
                return tl;
            }

            // 초기 세팅
            [title, eng, sub1, sub2, desc, img1C, img2C, catchphrase, metricsBox].forEach(setUp);
            [bg1, bg2].forEach(el => el && gsap.set(el, { autoAlpha: 0 })); // 배경 텍스트는 투명도만

            // 타임라인 구성
            if (img1C) tl.to(img1C, { y: 0, autoAlpha: 1, duration: 0.25, ease: CFG.ease }, 0.00);
            if (img2C) tl.to(img2C, { y: 0, autoAlpha: 1, duration: 0.25, ease: CFG.ease }, 0.00);

            let pos = 0.12;
            if (title) { tl.to(title, { y: 0, autoAlpha: 1, duration: 0.25, ease: CFG.ease }, pos); pos += 0.12; }
            if (eng) { tl.to(eng, { y: 0, autoAlpha: 1, duration: 0.30, ease: CFG.ease }, pos); pos += 0.12; }

            const subs = [sub1, sub2].filter(Boolean);
            if (subs.length) { tl.to(subs, { y: 0, autoAlpha: 1, duration: 0.30, ease: CFG.ease, stagger: 0.05 }, pos); pos += 0.12; }

            if (desc) { tl.to(desc, { y: 0, autoAlpha: 1, duration: 0.30, ease: CFG.ease }, pos); pos += 0.12; }

            const bgGroup = [catchphrase, bg1, bg2].filter(Boolean);
            if (bgGroup.length) { tl.to(bgGroup, { autoAlpha: 1, duration: 0.30, ease: CFG.ease }, pos); pos += 0.12; }
            if (metricsBox) { tl.to(metricsBox, { y: 0, autoAlpha: 1, duration: 0.30, ease: CFG.ease }, pos); pos += 0.12; }

            // ===== value2 한꺼번에 처리 (모드 스위치) =====
            if (counters.length) {
                const arr = Array.from(counters);

                if (COUNTER.mode === "scrub") {
                    // 전부 스크롤 비례
                    const startPos = pos;
                    arr.forEach(node => {
                        const p = parseNum(node.textContent);
                        if (!p) return;
                        const isInt = Number.isInteger(p.target);
                        node.textContent = (isInt ? 0 : 0) + p.suffix;
                        const obj = { val: 0 };
                        tl.to(obj, {
                            val: p.target,
                            duration: COUNTER.scrubSegment,
                            ease: "none",
                            onUpdate: () => {
                                const v = isInt ? Math.round(obj.val) : Math.round(obj.val * 100) / 100;
                                node.textContent = v + p.suffix;
                            }
                        }, startPos);
                    });
                    pos += 0.10;

                } else if (COUNTER.mode === "auto") {
                    // 전부 자동 카운트업 (뷰포트 닿으면 onEnter/onEnterBack)
                    arr.forEach(node => {
                        const p = parseNum(node.textContent);
                        if (!p) return;
                        const isInt = Number.isInteger(p.target);
                        const setText = v => node.textContent = (isInt ? Math.round(v) : Math.round(v * 100) / 100) + p.suffix;
                        setText(0);

                        ScrollTrigger.create({
                            trigger: node,           // 요소 기준으로 트리거
                            start: "top 85%",        // 필요 시 90%/center로 조정
                            end: "bottom top+=10%",
                            onEnter: () => {
                                if (node._tw) node._tw.kill();
                                node._tw = gsap.to({ val: 0 }, {
                                    val: p.target,
                                    duration: COUNTER.autoDuration,
                                    ease: COUNTER.ease,
                                    overwrite: true,
                                    onUpdate: function () { setText(this.targets()[0].val); }
                                });
                            },
                            onEnterBack: () => {
                                if (node._tw) node._tw.kill();
                                node._tw = gsap.to({ val: 0 }, {
                                    val: p.target,
                                    duration: COUNTER.autoDuration,
                                    ease: COUNTER.ease,
                                    overwrite: true,
                                    onUpdate: function () { setText(this.targets()[0].val); }
                                });
                            }
                        });
                    });

                } else {
                    // mixed: 앞 1~3은 스크럽, 마지막만 자동
                    const last = arr[arr.length - 1];
                    const scrubs = arr.slice(0, -1);

                    const startPos = pos;
                    scrubs.forEach(node => {
                        const p = parseNum(node.textContent);
                        if (!p) return;
                        const isInt = Number.isInteger(p.target);
                        node.textContent = (isInt ? 0 : 0) + p.suffix;
                        const obj = { val: 0 };
                        tl.to(obj, {
                            val: p.target,
                            duration: COUNTER.scrubSegment,
                            ease: "none",
                            onUpdate: () => {
                                const v = isInt ? Math.round(obj.val) : Math.round(obj.val * 100) / 100;
                                node.textContent = v + p.suffix;
                            }
                        }, startPos);
                    });
                    pos += 0.10;

                    if (last) {
                        const p = parseNum(last.textContent);
                        if (p) {
                            const isInt = Number.isInteger(p.target);
                            const setText = v => last.textContent = (isInt ? Math.round(v) : Math.round(v * 100) / 100) + p.suffix;
                            setText(0);
                            ScrollTrigger.create({
                                trigger: last,
                                start: "top 85%",
                                end: "bottom top+=10%",
                                onEnter: () => {
                                    if (last._tw) last._tw.kill();
                                    last._tw = gsap.to({ val: 0 }, {
                                        val: p.target,
                                        duration: COUNTER.autoDuration,
                                        ease: COUNTER.ease,
                                        overwrite: true,
                                        onUpdate: function () { setText(this.targets()[0].val); }
                                    });
                                },
                                onEnterBack: () => {
                                    if (last._tw) last._tw.kill();
                                    last._tw = gsap.to({ val: 0 }, {
                                        val: p.target,
                                        duration: COUNTER.autoDuration,
                                        ease: COUNTER.ease,
                                        overwrite: true,
                                        onUpdate: function () { setText(this.targets()[0].val); }
                                    });
                                }
                            });
                        }
                    }
                }
            }

            return tl;
        }

        /* ===== 초기화 ===== */
        function init() {
            // 중복 방지
            ScrollTrigger.getAll().forEach(t => t.kill());
            gsap.killTweensOf("*");

            document.querySelectorAll(".downdown_wrapper").forEach(sec => buildSectionTimeline(sec));

            setTimeout(() => ScrollTrigger.refresh(), 0);
            window.addEventListener("load", () => ScrollTrigger.refresh());
            window.addEventListener("resize", () => ScrollTrigger.refresh());
        }

        if (document.readyState === "loading") {
            document.addEventListener("DOMContentLoaded", init);
        } else {
            init();
        }
    </script>

</body>

</html>